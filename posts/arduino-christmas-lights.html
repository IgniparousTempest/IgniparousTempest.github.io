<!DOCTYPE HTML>
<!--
	Arcana by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Arduino Chrismas Lights - Courtney Pitcher</title>
		<meta property="og:image" content="/images/christmas_tree_shell.jpg"/>  
		<meta property="og:title" content="Arduino Chrismas Lights - Courtney Pitcher"/>  
		<meta property="og:description" content="An Arduino powered Chrismas lights project, plus an in-depth explanation."/> 
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<script src="/assets/google-analytics/google-analytics.js"></script>
		
		<script src="/assets/js/jquery.min.js"></script>
		<script src="/assets/js/jquery.dropotron.min.js"></script>
		<script src="/assets/js/skel.min.js"></script>
		<script src="/assets/js/util.js"></script>
		<!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
		<script src="/assets/js/main.js"></script>
		
		<link href="/assets/prism/prism.css" rel="stylesheet" />
		<script src="/assets/prism/prism.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/prism-clike.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/prism-c.min.js"></script>
		
		<!-- MathJax: Math rendering -->
		<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
	</head>
	<body>
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Logo -->
						<h1><a href="/" id="logo">Courtney <em>Pitcher</em></a></h1>

					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="/">Home</a></li>
								<li><a href="/index.html#electronics">Electronics</a></li>
								<li><a href="/posts/arduino.html">Arduino</a></li>
								<li class="current"><a href="javascript:window.location.href=window.location.href">Arduino Christmas Lights</a></li>
							</ul>
						</nav>

				</div>

			<!-- Main -->
				<section class="wrapper style1">
					<div class="container">
						<div id="content">

							<!-- Content -->

								<article>
									<header>
										<h2>Morse Code Christmas Lights Powered by an Arduino</h2>
										<p>Chrismas Lights for the Kidnapped Tree.</p>
									</header>
									
									<p>This is a rather simple project, that uses an arduino to flash and pulse lights, the pattern 
									of flashes and pulses can be used to signal Morse code messages.</p>
									
									<p>In the days leading up to Christmas, while I was sitting in one of the camping chairs that 
									make up the sole furnishings of my living room, I decided I needed a tree. Luckily I spied a wooden 
									tree through the hole in one of my neighbour's windows, I decided to borrow it. Getting into 
									his house is quite easy, since he drove his car though his prefab wall one night when he came home 
									drunk.</p>

									<h3>Bill of Materials</h3>
									<ol style="margin-left: 20px;">
										<li>1x Arduino (<a href="https://www.sparkfun.com/products/11021">Available at Sparkfun</a>)</li>
										<li>20x Red LED (<a href="https://www.sparkfun.com/products/9590">Available at Sparkfun</a>)</li>
										<li>1x 100Ω resistor (<a href="https://www.sparkfun.com/products/13761">Available at Sparkfun</a>)</li>
										<li>1x NPN transistor (optional) (<a href="https://www.sparkfun.com/products/521">Available at Sparkfun</a>)</li>
										<li>1x 1kΩ resistor (optional) (<a href="https://www.sparkfun.com/products/13760">Available at Sparkfun</a>)</li>
									</ol>

									<h3>Circuit</h3>
									<p>The ciruit uses a NPN transistor as a low side switch. The transistor allows the arduino 
									to provide more current and voltage. The Vin pin of the arduino can provide up to 1A, as 
									opposed to the 40mA of the I/O pins. The Vin pin provides the same voltage as the Arduino 
									is powered by, in this case it is using a 12V power supply.</p>
									
									<img width="80%" style="display: block; margin-left: auto; margin-right: auto;" src="https://rawgithub.com/IgniparousTempest/arduino-christmas-lights/master/christmas_lights_breadboard.svg"/>
									<p>The led chain is made up of a single LED colour, otherwise only the colour with the lowest 
									voltage drop will be lit brightly. More chains can be added with a different colour each, 
									but the resistor values will need to be recalculated very carefully, to avoid diode current 
									hogging.</p>
									<img width="80%" style="display: block; margin-left: auto; margin-right: auto;" src="https://rawgithub.com/IgniparousTempest/arduino-christmas-lights/master/christmas_lights_schematic.svg"/>
									
									<h3 id="code_example">Code</h3>
									<p>Here is code use to control the lights, it is explained in the comments.</p>
									
									<div style="text-align: center; font-size: 80%; width: 100%; max-width: 800px; margin-left:auto; margin-right:auto;">
									<pre  class="language-c line-numbers" data-src="https://raw.githubusercontent.com/IgniparousTempest/arduino-christmas-lights/master/christmas_lights.ino"></pre>
									</div>
									
									<h3>Math</h3>
									<style>
									.flex-container {
									    display: -webkit-flex;
									    display: flex;
									    -webkit-flex-wrap: wrap;
									    flex-wrap: wrap;
									    width: 100%;
									    height: 100%;
									}
									</style>
									
									<p>The following shows the process of calculating the values for the resistors used in the 
									low side switch. </p>
									<img width="30%" style="display: block; margin-left: auto; margin-right: auto;" src="/images/NPN_low_switch.svg"/>
									<p>
									We want:<br>
									\(I_{L}=40mA\), the current will be the same in all LEDs in series.
									</p>
									<p>
									We Know:<br>
									\(V_{in}=12V\)<br>
									\(V_{CE}=0.2V\), transistor voltage drop when the transistor is saturated.<br>
									\(V_{L}=1.8V\), LED voltage drop.<br>
									\(I_{B}\ge\frac{I_{C}}{10}\), percent of current at base to cause saturation.<br>
									\(V_{pin 9}=5V\), Voltage from Arduino I/0 pin.<br>
									\(V_{BE}=0.7V\), Voltage drop over PN junction of transistor.
									</p>
									
									To find \(R_{B}\):<br>
									<div class="flex-container">
										\(I_{B}=\frac{I_{C}}{10}\)\(=\frac{40mA}{10}=4mA\)
									</div>
									<div class="flex-container">
										\(R_{B}=\frac{V_{R_{B}}}{I_{B}}\)\(=\frac{V_{pin 9}-V_{BE}}{I_{B}}=\frac{5-0.7}{4mA}\)\(=1075\Omega\approx1k\Omega\)
									</div>
									<br>
									
									To find \(n\), number of resistors in series:<br>
									<div class="flex-container">
										\(n=\lfloor\frac{V_{in}-V_{CE}}{V_{L}}\rfloor\)\(=\lfloor\frac{12-0.2}{1.8}\rfloor=\lfloor6.\dot{5}\rfloor=6\)
									</div>
									<br>
										
									To find \(R_{C}\):<br>
									<div class="flex-container">
										\(R_{C}=\frac{V_{in}-V_{CE}-V_{L}\times n}{I_{R_{C}}}\)\(=\frac{12-0.2-1.8\times6}{40mA}=\frac{1}{0.04}\)\(=25\Omega\approx27\Omega\)
									</div>
									<br>
								</article>

						</div>
					</div>
				</section>

			<!-- Footer -->
				<script> 
					$(function(){
						$("#footer").load("/footer.html"); 
					});
				</script>
				<div id="footer"></div>

		</div>

	</body>
</html>